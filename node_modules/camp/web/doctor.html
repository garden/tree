<!doctype html>
<meta charset=utf-8>
<title>doctor</title>

<section id=log>
</section>

<form id=sofa>
  <input id=in type=text placeholder="Say hello to the doctor">
  <input type=submit value=go>
</form>

<script src=/js/scout.js></script>

<script>

  var box = Scout('#in'),
      wall = Scout('#log');

  function log(message) {
    wall.appendChild(document.createElement('p')).textContent = message;
    box.focus();
    box.scrollIntoView();
  }

  Scout('#sofa').on('submit', function (query) {

    var message = box.value;
    box.value = '';
    log(message);

    query.action = 'doctor';
    query.data = { text: message };
    query.resp = function (data) {
      log(data.reply);
    };
  });

</script>

